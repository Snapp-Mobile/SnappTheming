name: Swift Build Workflow

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: macos-latest

    steps:
      - uses: SwiftyLab/setup-swift@latest
      - name: Checkout code
        uses: actions/checkout@v3

      - name: xcodebuild list
        run: cd SnappTheming && xcodebuild -list
#      - name: List Available Simulators
#        run: xcrun simctl list devices
      - name: Build SnappTheming Package
        run: |
            cd SnappTheming
            xcodebuild -scheme SnappTheming build \
                -destination 'platform=iOS Simulator,OS=18.1,name=iPhone 16' \
                -verbose
#            xcodebuild test \
#                -scheme SnappTheming-Package \
#                -destination 'platform=iOS Simulator,OS=17.5,name=iPhone 15 Pro'
#            xcodebuild test \
#                -scheme SnappTheming-Package \
#                -destination 'platform=iOS Simulator,OS=18.1,name=iPhone 16 Pro' \
#                -sdk iphonesimulator \
#                -verbose
#            xcodebuild test \
#                -scheme SnappTheming \
#                -destination 'platform=iOS Simulator,OS=18.1,name=iPhone 15 Pro' -verbose
#        run: cd SnappTheming && xcrun test -scheme SnappTheming -destination 'platform=iOS Simulator,OS=17.5,name=iPhone 15 Plus'
